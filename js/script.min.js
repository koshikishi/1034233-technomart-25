"use strict";var contactsLink=document.querySelector(".contacts__button"),modalContacts=document.querySelector(".modal--contacts");if(modalContacts){var modalContactsClose=modalContacts.querySelector(".modal__close"),contactsForm=modalContacts.querySelector(".contacts-form"),userData={name:document.getElementById("contacts-name"),email:document.getElementById("contacts-email"),message:document.getElementById("contacts-message")},isStorageSupport=!0,storage={name:"",email:""};try{storage.name=localStorage.getItem("name"),storage.email=localStorage.getItem("email")}catch(e){isStorageSupport=!1}contactsLink.addEventListener("click",function(e){e.preventDefault(),modalShow(modalContacts),storage.name&&storage.email?(userData.name.value=storage.name,userData.email.value=storage.email,userData.message.focus()):userData.name.focus()}),modalContactsClose.addEventListener("click",function(e){e.preventDefault(),modalClose()}),contactsForm.addEventListener("submit",function(e){userData.name.value&&userData.email.value&&userData.message.value?isStorageSupport&&(localStorage.setItem("name",userData.name.value),localStorage.setItem("email",userData.email.value)):(e.preventDefault(),modalContacts.classList.remove("modal--error"),modalContacts.offsetWidth,modalContacts.classList.add("modal--error"),userData.name.value?userData.email.value?userData.message.focus():userData.email.focus():userData.name.focus())})}var mapLink=document.querySelector(".contacts__map-image"),modalMap=document.querySelector(".modal--map");if(modalMap){var modalMapClose=modalMap.querySelector(".modal__close");mapLink.addEventListener("click",function(e){e.preventDefault(),modalShow(modalMap)}),modalMapClose.addEventListener("click",function(e){e.preventDefault(),modalClose()})}var cartButtons=document.querySelectorAll(".button--buy"),bookmarksButtons=document.querySelectorAll(".button--bookmarks"),cartCounter=document.querySelector(".header__button--cart"),bookmarksCounter=document.querySelector(".header__button--bookmarks"),modalCart=document.querySelector(".modal--cart");if(modalCart){for(var modalCartClose=modalCart.querySelector(".modal__close"),addBuyClickHandler=function(e){e.addEventListener("click",function(e){e.preventDefault(),modalShow(modalCart),increaseCounter(cartCounter),cartCounter.classList.contains("header__button--full")||cartCounter.classList.add("header__button--full")})},addBookmarksClickHandler=function(e){e.addEventListener("click",function(e){e.preventDefault(),increaseCounter(bookmarksCounter),bookmarksCounter.classList.contains("header__button--full")||bookmarksCounter.classList.add("header__button--full")})},i=0;i<cartButtons.length;i++)addBuyClickHandler(cartButtons[i]),addBookmarksClickHandler(bookmarksButtons[i]);modalCartClose.addEventListener("click",function(e){e.preventDefault(),modalClose()})}window.addEventListener("keydown",function(e){27===e.keyCode&&(e.preventDefault(),modalClose())});var overlay=document.querySelector(".overlay");overlay.addEventListener("click",function(){modalClose()});var serviceTabs=document.querySelectorAll(".tabs__selector"),serviceSlides=document.querySelectorAll(".tabs__item"),serviceTabCurrent=document.querySelector(".tabs__selector--current"),serviceSlideCurrent=document.querySelector(".tabs__item--current"),addTabClickHandler=function(e,t){e.addEventListener("click",function(r){r.preventDefault(),e!==serviceTabCurrent&&(serviceTabCurrent.classList.remove("tabs__selector--current"),serviceSlideCurrent.classList.remove("tabs__item--current"),e.classList.add("tabs__selector--current"),t.classList.add("tabs__item--current"),serviceTabCurrent=e,serviceSlideCurrent=t)})};for(i=0;i<serviceTabs.length;i++)addTabClickHandler(serviceTabs[i],serviceSlides[i]);var slider=document.querySelector(".filters-form__slider");if(slider){var rangeWidth=160,sliderIndent=20,thumbHalfWidth=10,price={min:0,max:34286},thumbs=slider.querySelectorAll(".filters-form__thumb"),isDragging=[!1,!1];thumbs[0].addEventListener("mousedown",function(){isDragging[0]=!0}),thumbs[1].addEventListener("mousedown",function(){isDragging[1]=!0}),slider.addEventListener("mouseup",function(){isDragging=[!1,!1]});var track=slider.querySelector(".filters-form__track"),inputs=document.querySelectorAll(".filters-form__price input"),rangeRatio=rangeWidth/(price.max-price.min),currentPrice={min:inputs[0].value,max:inputs[1].value};moveLeftThumb(currentPrice.min),moveRightThumb(currentPrice.max),slider.addEventListener("mousemove",function(e){isDragging[0]&&(currentPrice.min=Math.round(mousePosX(slider,e)/rangeRatio)+price.min,currentPrice.min<currentPrice.max&&currentPrice.min>=price.min&&(moveLeftThumb(currentPrice.min),inputs[0].value=currentPrice.min)),isDragging[1]&&(currentPrice.max=Math.round(mousePosX(slider,e)/rangeRatio)+price.min,currentPrice.max>currentPrice.min&&currentPrice.max<=price.max&&(moveRightThumb(currentPrice.max),inputs[1].value=currentPrice.max))}),inputs[0].addEventListener("blur",function(){inputs[0].value!==currentPrice.min&&(inputs[0].value<price.min?inputs[0].value=price.min:Number(inputs[0].value)>=currentPrice.max&&(inputs[0].value=currentPrice.max-1),currentPrice.min=inputs[0].value,moveLeftThumb(currentPrice.min))}),inputs[1].addEventListener("blur",function(){inputs[1].value!==currentPrice.max&&(inputs[1].value>price.max?inputs[1].value=price.max:inputs[1].value<=Number(currentPrice.min)&&(inputs[1].value=Number(currentPrice.min)+1),currentPrice.max=inputs[1].value,moveRightThumb(currentPrice.max))})}function initMap(){var e={lat:59.938723,lng:30.323039},t=new google.maps.Map(document.querySelector(".map"),{zoom:16,center:e}),r={path:"M12 0a8 8 0 0 0-8 8c0 1.421.382 2.75 1.031 3.906.108.192.221.381.344.563L12 24l6.625-11.531c.102-.151.19-.311.281-.469l.063-.094A7.954 7.954 0 0 0 20 8a8 8 0 0 0-8-8zm0 4a4 4 0 1 1 0 8 4 4 0 0 1 0-8z",fillColor:"#ee3643",fillOpacity:1,anchor:new google.maps.Point(12,24),strokeColor:"#b52933",strokeOpacity:.5,strokeWeight:2,scale:1.5};new google.maps.Marker({position:e,map:t,icon:r})}function modalShow(e){e.classList.add("modal--shown"),overlay.classList.add("overlay--shown")}function modalClose(){var e=document.querySelector(".modal--shown");e&&(e.classList.remove("modal--shown"),overlay.classList.remove("overlay--shown"),e.classList.contains("modal--error")&&e.classList.remove("modal--error"))}function increaseCounter(e){var t=e.textContent.indexOf(" "),r=e.textContent.slice(t++);e.textContent=e.textContent.slice(0,-(r.length-1)),r=Number(r)+1,e.textContent+=r}function moveLeftThumb(e){thumbs[0].style.left=(e-price.min)*rangeRatio+sliderIndent+"px",track.style.left=(e-price.min)*rangeRatio+thumbHalfWidth+"px"}function moveRightThumb(e){thumbs[1].style.right=(price.max-e)*rangeRatio+sliderIndent+"px",track.style.right=(price.max-e)*rangeRatio+thumbHalfWidth+"px"}function mousePosX(e,t){var r=Math.round(t.clientX-e.getBoundingClientRect().left)-(sliderIndent+thumbHalfWidth);return r<0&&(r=0),r>rangeWidth&&(r=rangeWidth),r}